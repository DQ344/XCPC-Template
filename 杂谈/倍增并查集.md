# 倍增并查集

首先考虑我们的普通并查集，我们只维护了单个元素的所属集合

现在来看这样一个问题，对于每次操作，给你两个长度相等的区间 $(l_1, r_1)$ 和 $(l_2, r_2)$，我们需要将 $l_1$ 和 $l_2$ 合并，$l_1 + 1$ 和 $l_2 + 1$ 合并，......，$r_1$ 和 $r_2$ 合并

会发现维护这样的区间合并，我们最后的复杂度是 $O(n)$ 的，假设有 $q$ 次操作，那么复杂度是 $O(nq)$

但是同样的，我们也可以知道，如果 $(l_1, r_1)$ 和 $(l_2, r_2)$ 是所属一个集合，那么 $(l_1, l_1 + k)$ 和 $(l_2, l_2 + k)$ 也是所属一个集合的

同样的，如果 $(l_1, l_1 + k)$ 和 $(l_2, l_2 + k)$ 所属一个集合，$(l_1 + k + 1, r_1)$ 和 $(l_2 + k + 1, r_2)$ 也是所属一个集合，那么 $(l_1, r_1)$ 和 $(l_2, r_2)$ 也是所属一个集合的

我们可以称上面这种合并的性质为**可合并律**，即我们的两个小区间可以合并成一个大区间

那么我们结合一下 $ST$ 表的区间查询的覆盖，我们也只需要去模拟这个操作，将每次合并的一个大区间，拆成合并两个小区间即可

- `merge(k, l1, l2)`
- `merge(k, r1 - (1 << k) + 1, r2 - (1 << k) + 1)`